library(flexdashboard)
library(shiny)
library(tidyverse)
library(memoise)
step_detail_df <- read_rds("data\\step_detail.RDS")
epoch_detail_df <- read_rds("data\\epoch_detail.RDS")
simulation_summary_df <- read_rds("data\\simulation_summary.RDS")
dataset_summary_df <- read_rds("data\\dataset_summary.RDS")
baseline_detail_df <- read_rds("data\\baseline_detail.RDS")
baseline_summary_df <- read_rds("data\\baseline_summary.RDS")
breakdown_df <- read_rds("data\\breakdown.RDS")
experiment_list <- sort(unique(simulation_summary_df$experiment))
breakdown_list <- breakdown_df$breakdown
choices_list <- c("Learner", "Scaler", "Selector", "Reducer", "Approximator")
.choice1 <- "Learner"
.choice2 <- "Scaler"
.experiment <- "credit-g"
component_summary <- function(.choice) {
step_detail_df %>%
filter(experiment == .experiment) %>%
group_by_at(c("study", "experiment", .choice)) %>%
summarise(n = length(unique(form_id))) %>%
mutate(choice = choice) %>%
select(study, experiment, choice, component = !! .choice, n)
}
choices_summary_df <-
purrr::map_dfr(choices_list,  choice_summary) %>%
mutate(choice = factor(choice))
choices_summary_df %>%
ggplot() +
geom_col(aes(x = forcats::fct_reorder(component, choice, .fun = unique, .desc = TRUE), y = n, fill = choice)) +
coord_flip() +
xlab("Component") +
facet_wrap(~ study)
choice_scores <- function(choice) {
step_detail_df %>%
filter(alive == 0, !is.na(score)) %>%
mutate(choice = choice) %>%
select(study, experiment, choice, component = !! choice, score)
}
choices_score_df <-
purrr::map_dfr(choices_list,  choice_scores) %>%
mutate(choice = factor(choice))
choices_score_df %>%
filter(experiment == "diabetes") %>%
ggplot() +
geom_point(aes(x = forcats::fct_reorder(component, choice, .fun = unique, .desc = TRUE), y = score, color = choice)) +
coord_flip() +
xlab("Component") +
facet_wrap(~ study)
step_detail_df %>%
filter(study == "short", experiment == "irish") %>%
filter(alive == 0, !is.na(score)) %>%
group_by(study, experiment, form_id) %>%
step_detail_df
source('~/autem/dashboard/process_test_simulation.R')
source('~/autem/dashboard/process_test_simulation.R')
debugSource('~/autem/dashboard/process_simulation.R')
debugSource('~/autem/dashboard/process_simulation.R')
source('~/autem/dashboard/process_test_simulation.R')
View(step_detail_df)
source('~/autem/dashboard/process_test_simulation.R')
View(step_detail_df)
source('~/autem/dashboard/process_test_simulation.R')
source('~/autem/dashboard/process_test_simulation.R')
source('~/autem/dashboard/process_test_simulation.R')
source('~/autem/dashboard/process_test_simulation.R')
source('~/autem/dashboard/process_test_simulation.R')
